<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bonus Fighter - Fullscreen</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #1a1a2e;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      font-family: 'Arial', sans-serif;
      overflow: auto;
    }

    #game-container {
      position: relative;
      width: 700px;
      height: 700px;
      background: #0f0f1e;
      border: 3px solid #16213e;
      border-top: none;
      box-shadow: 0 0 30px rgba(77, 171, 247, 0.3);
      margin-top: 0;
    }

    .back-btn {
      width: 200px;
      margin: 20px auto;
      display: block;
      padding: 12px;
      background: #868e96;
      color: #fff;
      border: 2px solid #495057;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
    }

    /* Shop Styles */
    .coins-display {
      text-align: center;
      font-size: 24px;
      color: #ffd43b;
      margin: 10px 0;
    }

    .shop-caption {
      text-align: center;
      color: #adb5bd;
      font-size: 14px;
      margin-bottom: 20px;
    }

    .shop-section {
      margin: 20px 0;
    }

    .shop-section h2 {
      color: #4dabf7;
      font-size: 18px;
      margin-bottom: 15px;
    }

    .ability-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .ability-box {
      background: #2b2b2b;
      border: 2px solid #495057;
      border-radius: 8px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .ability-box:hover {
      border-color: #74c0fc;
      transform: scale(1.02);
    }

    .ability-box.owned {
      background: #1a2a4a;
      border-color: #4dabf7;
    }

    .ability-box.equipped {
      background: #1a4d2e;
      border-color: #51cf66;
      box-shadow: 0 0 15px rgba(81, 207, 102, 0.4);
    }

    .ability-box h3 {
      color: #74c0fc;
      font-size: 16px;
      margin: 0 0 8px 0;
    }

    .ability-box p {
      color: #adb5bd;
      font-size: 13px;
      margin: 0 0 10px 0;
    }

    .ability-status {
      color: #ffd43b;
      font-weight: bold;
    }

    .stat-upgrades {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .stat-box {
      background: #2b2b2b;
      border: 2px solid #343a40;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .stat-box h3 {
      color: #74c0fc;
      font-size: 18px;
      margin: 0 0 10px 0;
    }

    .stat-box p {
      color: #e9ecef;
      font-size: 16px;
      margin: 5px 0;
    }

    .upgrade-btn {
      margin-top: 15px;
      padding: 10px 20px;
      background: #51cf66;
      color: #000;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }

    .upgrade-btn:disabled {
      background: #495057;
      color: #868e96;
      cursor: not-allowed;
    }

    /* Level Grid */
    .level-grid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 8px;
      padding: 20px;
    }

    .level-box {
      aspect-ratio: 1;
      background: #2b2b2b;
      border: 2px solid #343a40;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s;
    }

    .level-box:hover {
      border-color: #4dabf7;
      transform: scale(1.05);
    }

    .level-box.completed {
      background: #1a4d2e;
      border-color: #2f9e44;
      color: #51cf66;
    }

    .level-box.locked {
      background: #1a1a1a;
      border-color: #212529;
      color: #495057;
      cursor: not-allowed;
    }

    /* Quest Styles */
    .quests-container {
      max-height: 600px;
      overflow-y: auto;
      padding: 10px;
    }

    .quest-card {
      background: #2b2b2b;
      border: 2px solid #343a40;
      border-radius: 8px;
      padding: 15px;
      margin: 10px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .quest-card.completed {
      background: #1a4d2e;
      border-color: #2f9e44;
    }

    .quest-card.claimable {
      background: #1c3a57;
      border-color: #4dabf7;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        border-color: #4dabf7;
      }

      50% {
        border-color: #74c0fc;
      }
    }

    .claim-btn {
      padding: 10px 20px;
      background: #51cf66;
      color: #000;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }

    .quest-info {
      flex: 1;
    }

    .quest-name {
      color: #74c0fc;
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .quest-desc {
      color: #adb5bd;
      font-size: 13px;
      margin-bottom: 8px;
    }

    .quest-progress {
      color: #e9ecef;
      font-size: 14px;
      font-weight: bold;
    }

    .quest-progress.complete {
      color: #51cf66;
    }

    .quest-levels {
      color: #868e96;
      font-size: 11px;
      margin-top: 5px;
    }

    .quest-reward {
      font-size: 18px;
      font-weight: bold;
      color: #ffd43b;
      margin: 0 15px;
    }

    /* Instructions page */
    .instructions {
      padding: 20px;
    }

    .instructions h2 {
      color: #74c0fc;
      font-size: 18px;
      margin-top: 20px;
    }

    .instructions p {
      color: #e9ecef;
      font-size: 16px;
      margin: 8px 0;
    }

    #gameCanvas {
      position: absolute;
      top: 0;
      left: 0;
      background: #0f0f1e;
      cursor: crosshair;
      touch-action: none;
      display: none;
    }

    #gameCanvas.active {
      display: block;
    }

    .menu-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 700px;
      height: 700px;
      background: #0f0f1e;
      overflow-y: auto;
      overflow-x: hidden;
      padding: 30px;
      box-sizing: border-box;
      color: #e9ecef;
    }

    .menu-screen.hidden {
      display: none;
    }

    .menu-screen h1 {
      color: #4dabf7;
      text-align: center;
      font-size: 56px;
      margin: 30px 0;
    }

    .menu-buttons {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      margin-top: 80px;
    }

    .menu-btn {
      width: 350px;
      padding: 20px;
      font-size: 28px;
      font-weight: bold;
      background: #495057;
      color: #e9ecef;
      border: 2px solid #343a40;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .menu-btn:hover {
      background: #74c0fc;
      color: #0f0f1e;
      border-color: #4dabf7;
      transform: scale(1.05);
    }

    /* Game overlays match 700x700 canvas size */
    .game-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 700px;
      height: 700px;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .game-overlay.hidden {
      display: none;
    }

    .overlay-content {
      text-align: center;
      padding: 50px;
    }

    .overlay-content h1 {
      font-size: 72px;
      margin-bottom: 50px;
    }

    .victory-text {
      font-size: 28px;
      margin: 15px 0;
      color: #e9ecef;
    }

    .victory-coins {
      font-size: 36px;
      margin: 25px 0;
      color: #ffd43b;
    }

    .game-btn {
      padding: 25px 50px;
      font-size: 26px;
      font-weight: bold;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      min-width: 220px;
      margin: 15px;
    }

    .button-row {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin: 30px 0;
    }

    .game-btn:hover {
      transform: scale(1.05);
    }

    .game-btn.green {
      background: #51cf66;
      color: #000;
    }

    .game-btn.blue {
      background: #4dabf7;
      color: #fff;
    }

    .game-btn.gray {
      background: #868e96;
      color: #fff;
    }
  </style>
  <style>
    /* Override to match 700x700 */
    #game-container {
      width: 700px !important;
      height: 700px !important;
    }

    #gameCanvas {
      width: 700px !important;
      height: 700px !important;
    }

    .menu-screen {
      width: 700px !important;
      height: 700px !important;
    }

    .game-overlay {
      width: 700px !important;
      height: 700px !important;
    }
  </style>
</head>

<body>
  <div id="game-container">
    <canvas id="gameCanvas" width="700" height="700"></canvas>

    <!-- Same menu structure as popup.html but won't duplicate here for brevity -->
    <!-- The game will use the same JavaScript files -->

    <div id="mainMenu" class="menu-screen">
      <h1>BONUS FIGHTER</h1>
      <p style="text-align: center; color: #adb5bd; font-size: 14px; margin: -10px 0 20px 0;">
        💡 Use <strong>Cmd +/-</strong> (Mac) or <strong>Ctrl +/-</strong> (Windows) to zoom screen
      </p>
      <div class="menu-buttons">
        <button id="btn-play" class="menu-btn">Play</button>
        <button id="btn-grind" class="menu-btn">Grind Mode</button>
        <button id="btn-shop" class="menu-btn">Shop</button>
        <button id="btn-quests" class="menu-btn">Quests</button>
        <button id="btn-level-select" class="menu-btn">Level Select</button>
        <button id="btn-stats" class="menu-btn">Stats</button>
        <button id="btn-how-to-play" class="menu-btn">How to Play</button>
      </div>
    </div>

    <!-- Shop Screen -->
    <div id="shopScreen" class="menu-screen hidden">
      <h1>SHOP</h1>
      <div id="shopCoins" class="coins-display">💰 0 Coins</div>
      <p class="shop-caption">You can only equip ONE ability of each type</p>

      <!-- Healing Abilities -->
      <div class="shop-section">
        <h2>HEALING (E Key) - Equip 1</h2>
        <div class="ability-grid">
          <div class="ability-box" data-ability="healthPotion" data-type="healing">
            <h3>Health Potion</h3>
            <p>Heal 50% of max HP</p>
            <span class="ability-status">💰 100</span>
          </div>
          <div class="ability-box" data-ability="shield" data-type="healing">
            <h3>Shield</h3>
            <p>Set HP to 5% + invincible 5s (auto-save)</p>
            <span class="ability-status">💰 100</span>
          </div>
          <div class="ability-box" data-ability="vampire" data-type="healing">
            <h3>Vampire</h3>
            <p>Lifesteal 50% for 6s</p>
            <span class="ability-status">💰 100</span>
          </div>
        </div>
      </div>

      <!-- Special Abilities -->
      <div class="shop-section">
        <h2>SPECIAL (R Key) - Equip 1</h2>
        <div class="ability-grid">
          <div class="ability-box" data-ability="laser" data-type="special">
            <h3>Laser Beam</h3>
            <p>Auto-aim laser for 4s</p>
            <span class="ability-status">💰 100</span>
          </div>
          <div class="ability-box" data-ability="bulletStorm" data-type="special">
            <h3>Bullet Storm</h3>
            <p>Fire 12 bouncing bullets</p>
            <span class="ability-status">💰 100</span>
          </div>
          <div class="ability-box" data-ability="disarm" data-type="special">
            <h3>Disarm</h3>
            <p>Clear, silence + vulnerable 5s</p>
            <span class="ability-status">💰 100</span>
          </div>
        </div>
      </div>

      <!-- Passive Abilities -->
      <div class="shop-section">
        <h2>PASSIVE (Always On) - Equip 1</h2>
        <div class="ability-grid">
          <div class="ability-box" data-ability="autoHeal" data-type="passive">
            <h3>Auto-Heal</h3>
            <p>Regen 5% max HP/s after 1s no damage</p>
            <span class="ability-status">💰 100</span>
          </div>
          <div class="ability-box" data-ability="tactician" data-type="passive">
            <h3>Tactician</h3>
            <p>+18% dmg, +10% HP, +15% speed, E=10s R=12s, heal 2%/sec</p>
            <span class="ability-status">💰 100</span>
          </div>
          <div class="ability-box" data-ability="revenge" data-type="passive">
            <h3>Revenge</h3>
            <p>Deal 3-10x damage back (scales)</p>
            <span class="ability-status">💰 100</span>
          </div>
        </div>
      </div>

      <!-- Stat Upgrades -->
      <div class="shop-section">
        <h2>STAT UPGRADES</h2>
        <div class="stat-upgrades">
          <div class="stat-box">
            <h3>Max Health</h3>
            <p id="healthValue">100/320</p>
            <p id="healthLevel">Level 0/11</p>
            <button id="btn-upgrade-health" class="upgrade-btn"><span id="healthCost">-100💰</span></button>
          </div>
          <div class="stat-box">
            <h3>Bullet Damage</h3>
            <p id="damageValue">25/80</p>
            <p id="damageLevel">Level 0/11</p>
            <button id="btn-upgrade-damage" class="upgrade-btn"><span id="damageCost">-100💰</span></button>
          </div>
        </div>
      </div>

      <button id="btn-shop-back" class="back-btn">Back to Menu</button>
    </div>

    <!-- Quests Screen -->
    <div id="questsScreen" class="menu-screen hidden">
      <h1>QUESTS & ACHIEVEMENTS</h1>
      <button id="btn-quests-exit"
        style="position: sticky; top: 10px; float: right; padding: 10px 20px; background: #868e96; color: #fff; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; z-index: 100;">✕
        Exit</button>
      <div id="questsContent" class="quests-container"></div>
      <button id="btn-quests-back" class="back-btn">Back to Menu</button>
    </div>

    <!-- Level Select Screen -->
    <div id="levelSelectScreen" class="menu-screen hidden">
      <h1>SELECT LEVEL</h1>
      <div id="levelGrid" class="level-grid"></div>
      <button id="btn-levelselect-back" class="back-btn">Back to Menu</button>
    </div>

    <!-- Stats Screen -->
    <div id="statsScreen" class="menu-screen hidden">
      <h1>SPEEDRUN RECORDS</h1>
      <div id="statsContent"></div>
      <button id="btn-stats-back" class="back-btn">Back to Menu</button>
    </div>

    <!-- How to Play Screen -->
    <div id="howToPlayScreen" class="menu-screen hidden">
      <h1>HOW TO PLAY</h1>
      <div class="instructions">
        <h2>MOVEMENT:</h2>
        <p>Use WASD or Arrow Keys to move</p>

        <h2>AIMING:</h2>
        <p>Move your mouse to aim</p>

        <h2>SHOOTING:</h2>
        <p>Press SPACE or Click to shoot</p>

        <h2>ABILITIES:</h2>
        <p>Press E for Healing ability</p>
        <p>Press R for Special ability</p>
        <p>Press Q to toggle Auto-Aim/Shoot</p>

        <h2>EARNING COINS:</h2>
        <p>💰 Complete levels to earn coins</p>
        <p>⭐ Get stars (under 60s) for bonus coins</p>
        <p>🏆 Complete quests for big rewards</p>
        <p>🌊 Play Grind Mode to farm coins</p>

        <h2>QUESTS:</h2>
        <p>Go to Quest page to see your progress</p>
        <p>Click CLAIM when ready to collect coins</p>
        <p>Complete challenges for 20-1000 coins!</p>

        <h2>SHOP:</h2>
        <p>Buy 9 unique abilities (200-300 coins each)</p>
        <p>Upgrade Health: 100 → 320 HP (11 levels)</p>
        <p>Upgrade Damage: 25 → 80 DMG (11 levels)</p>
        <p>Max stats cost ~13,000 coins total</p>

        <h2>GOAL:</h2>
        <p>Defeat all 42 bosses!</p>
        <p>Each boss has unique creative mechanics</p>
        <p>Beat GOD MODE (Boss 42) to win!</p>
      </div>
      <button id="btn-howtoplay-back" class="back-btn">Back to Menu</button>
    </div>

    <!-- Victory Overlay -->
    <div id="victoryOverlay" class="game-overlay hidden">
      <div class="overlay-content">
        <h1 style="color: #51cf66;">VICTORY!</h1>
        <p id="victoryLevel" class="victory-text">Level 1 Complete</p>
        <p id="victoryTime" class="victory-text">Time: 0.00s</p>
        <p id="victoryBest" class="victory-text"></p>
        <p id="victoryCoins" class="victory-coins"></p>
        <div class="button-row">
          <button id="btn-victory-next" class="game-btn green">Next Level</button>
          <button id="btn-victory-shop" class="game-btn blue">Shop</button>
          <button id="btn-victory-quests" class="game-btn blue">Quests</button>
        </div>
        <div class="button-row">
          <button id="btn-victory-retry" class="game-btn gray">Retry</button>
          <button id="btn-victory-menu" class="game-btn gray">Menu</button>
        </div>
      </div>
    </div>

    <!-- Defeat Overlay -->
    <div id="defeatOverlay" class="game-overlay hidden">
      <div class="overlay-content">
        <h1 style="color: #ff6b6b;">DEFEATED</h1>
        <div class="button-row">
          <button id="btn-defeat-retry" class="game-btn green">Retry</button>
          <button id="btn-defeat-shop" class="game-btn blue">Shop</button>
          <button id="btn-defeat-quests" class="game-btn blue">Quests</button>
        </div>
        <button id="btn-defeat-menu" class="game-btn gray">Menu</button>
      </div>
    </div>

    <!-- Grind Mode Overlay -->
    <div id="grindOverlay" class="game-overlay hidden">
      <div class="overlay-content">
        <h1 style="color: #ffd43b;">GRIND MODE COMPLETE</h1>
        <p id="grindWaves" class="victory-text">Waves Survived: 0</p>
        <p id="grindCoins" class="victory-coins">+0 💰</p>
        <p id="grindBest" class="victory-text"></p>
        <div class="button-row">
          <button id="btn-grind-retry" class="game-btn green">Play Again</button>
          <button id="btn-grind-shop" class="game-btn blue">Shop</button>
        </div>
        <button id="btn-grind-menu" class="game-btn gray">Menu</button>
      </div>
    </div>
  </div>

  <!-- Load all game scripts -->
  <script src="game/bulletColors.js"></script>
  <script src="game/storage.js"></script>
  <script src="game/quests.js"></script>
  <script src="game/abilities.js"></script>
  <script src="game/shop.js"></script>
  <script src="game/animations.js"></script>
  <script src="game/projectile.js"></script>
  <script src="game/player.js"></script>
  <script src="game/ghost.js"></script>
  <script src="game/firepool.js"></script>
  <script src="game/cerberushead.js"></script>
  <script src="game/boss.js"></script>
  <script src="game/bosses.js"></script>
  <script src="game/controls.js"></script>
  <script src="game/ui.js"></script>
  <script src="game/engine.js"></script>
  <script src="game/htmlMenus.js"></script>
  <script src="init.js"></script>
</body>

</html>